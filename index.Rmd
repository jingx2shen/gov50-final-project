---
title: "Department of Energy Budgetary Requests and Allocations"
author: "Jing-Jing Shen"
description: "Change in DOE budgetary requests to Congress and the subsequent appropriations"
output:
  distill::distill_article:
    self_contained: false
---

## Project thoughts

For my final project, I am hoping to examine budgetary data from the Department of Energy (DOE) over the last several decades (1978--). As part of my senior thesis in government, I am looking into how federal climate and energy policy has shaped research priorities at national laboratories of the DOE, particularly in renewable energy, and I would like to bolster this study with an investigation into the DOE's budgetary history. More specifically, I would like to gain a deeper understanding of the relationship between DOE budget requests to Congress and the ultimate appropriations made, the breakdown of this budget by sector and research area, as well as what policy factors and/or energy economics may be related to this budgetary information. 

To parse this potential relationship, I will be drawing upon data from the following resources: 

1. [DOE Budget Authority for Energy Research, Development, and Demonstration Database] (https://www.belfercenter.org/publication/database-us-department-energy-doe-budgets-energy-research-development-demonstration-1): This website contains an Excel file containing tables of appropriations by Congress to the Department of Energy for R&D purposes from fiscal year 1978-2022. These numbers include the budget requests by the DOE to Congress each year, along with the ultimate appropriation amount from Congress, as well as the breakdowns of the agency's budget by research areas (i.e., fossil fuels, energy efficiency, hydrogen, renewable energy, nuclear energy). I will need to convert this data into csv form.

2. [Party Government Since 1957] (https://history.house.gov/Institution/Presidents-Coinciding/Party-Government/): This data encompasses the list of past United States Presidents, Congressional party majorities, and a designation of whether each Congress consisted of Divided or Unified Government. I have cleaned the data manually to distill this information to align with each of my individual fiscal years of interest. 

Does Congress's annual appropriation of funding to the United States Department of Energy (DOE) (dependent variable #1) depend on the political party that is in power in Congress (independent variable #1) and/or the Presidency (independent variable #2)? More specifically, is Congressional appropriation of funding larger when Democrats control Congress and/or the Presidency, compared to when Republicans are the majority party? In addition, upon the appropriation of this funding, does the partisan affiliation of the majority party in Congress and/or the party that holds the Presidency also influence if the portion of the DOE's budget is allocated toward renewable and clean energy projects (dependent variable #2)? My hypothesis is that both the Congressional appropriation of funding to the DOE would be larger when Democrats control Congress and/or the Presidency. In the United States, the Democratic Party has become associated with policies entailing a larger role for government, while the Republican Party tends to favor less government involvement. Historically, Democrats (particularly since the term of President Jimmy Carter) have been more likely to support increased funding for national governmental agencies, while Republicans oppose this (especially beginning during President Ronald Reagan's term). As such, my explanatory variable of U.S. political leaders' (that is Congressional officials, representing the legislative branch, and the President, who helms the executive branch) partisan association is readily measured with their official party identification. I will code datasets #1 and #2 so that each President is assigned to a unique value that represents one of Democrats, Republicans, and Independent/Other parties, and I will apply this numerical code designation to each Congress as well. My outcome variable of interest is twofold: (1) the financial dollar amount of Congress's final budgetary appropriation to the DOE during each fiscal year, and (2) the breakdown of this overall budget by research sector. The measurements for these dependent variables are recorded every year based on the DOE's annual fiscal reports, obtained for the years 1978-2022. If I see that (1) the Congressional appropriation to the DOE and (2) the proportion of this budget that is set aside for clean energy and renewables energy research is larger during periods of Democratic Congressional/Presidential control, this would lend support for my hypothesis. Conversely, if I note that (1) the Congressional appropriation to the DOE and (2) the proportion of this amount allocated to clean and renewable energy research is smaller or equal in the case of Democratic and Republican control, this would support rejecting my hypothesis. Running a regression of (1) Congressional appropriations to the DOE and (2) proportion of (1) that is assigned to clean or renewable energy on the variables for partisan control, a positive, significant coefficient would provide support for my hypothesis.

```{r}
library(tidyverse)
library(ggplot2)
```

```{r dataviz}
dataset <- read_csv("gov50milestone3.csv")
dataset
```
```{r totaldoernd}
dataset_graph1 <- dataset |>
  ggplot(mapping = aes(x = fiscal_year, 
                       y = total_doe_rnd), width = 25, height = 20) +
  theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust = 1)) +
  geom_col(aes(fill = president_party)) +
  scale_fill_manual(values = c(Democrat = "blue", 
                               Republican = "red")) +
  labs(x = "Fiscal Year", 
       y = "DOE Energy R&D FY Requests (million 2020$)",
       title = "Total DOE Energy R&D Investments by Fiscal Year, 1978-2022",
       caption = "SOURCE: 
       Gallagher, K.S. and L.D. Anadon, 
       DOE Budget Authority for Energy Research, Development, and Demonstration Database,' 
       The Fletcher School, Tufts University; Department of Land Economy, University of Cambridge; 
       and Belfer Center for Science and International Affairs, Harvard Kennedy School; April 8, 2022.",
       fill = "President Party") 
dataset_graph1

# xlim = c(1978, 2022))

# Future ideas: how track with global spending on energy; how track with oil prices; breakdown by sector; DARPA-E, DARPA-C
```

```{r prev-as-binary}
set.seed(02138)
library(infer)

dataset_binary <- read_csv("gov50milestone4binary.csv")
dataset_binary
```
```{r hypothesis-test}
dataset_mut <- dataset_binary |>
  mutate(president_party_binary = if_else(president_party == 1, "Democrat", "Republican")) 

base_diff <- dataset_mut |>
  specify(total_doe_rnd ~ president_party_binary) |>
  calculate(stat = "diff in means", order = c("Democrat", "Republican"))
base_diff

# 2-sided permutation hypothesis test
base_p <- dataset_mut |>
  specify(total_doe_rnd ~ president_party_binary) |>
  hypothesize(null = "independence") |>
  generate(reps = 1000, type = "permute") |>
  calculate(stat = "diff in means", order = c("Democrat", "Republican")) |>
  get_p_value(obs_stat = base_diff, direction = "both")
base_p

dist <- dataset_mut |>
  specify(total_doe_rnd ~ president_party_binary) |>
  hypothesize(null = "independence") |>
  generate(reps = 1000, type = "permute") |>
  calculate(stat = "diff in means", order = c("Democrat", "Republican")) |>
  visualize() +
  shade_p_value(obs_stat = 790.15, direction = "both")
dist
```

The observed difference between the mean total DOE R&D budgets between all Democratic presidencies and Republican presidencies is 790.15 dollars (D-R), and the corresponding p-value is 0.214. Considering an $/alpha$ of 0.05, since p > 0.05, we do not have evidence to reject the null hypothesis of no effect. In other words, there is not a statistically significant difference between Democratic and Republican presidencies in terms of the DOE R&D budget.

## JOINS 
```{r multi-variable-regression}
# read in previous dataset, but for sake of merging fiscal years during `join()`, take out the 2009 ARPA data point
no_arpa <- read_csv("gov50milestone4binary_no_arpa.csv")
no_arpa_complete <- no_arpa |>
  filter(fiscal_year %in% c(1978:2021))
no_arpa_complete

# csv for Congressional spending
congressional_spending <- read_csv("congressional_spending.csv") 
congressional_spending_complete <- congressional_spending |>
  filter(fiscal_year %in% c(1978:2021))
congressional_spending_complete

# csv for crude oil prices
crude_oil_prices <- read_csv("crude_oil_prices.csv")
crude_oil_prices_complete <- crude_oil_prices |>
  filter(fiscal_year %in% c(1978:2021))
crude_oil_prices_complete

# csv for inflation
inflation <- read_csv("inflation.csv")
inflation_complete <- inflation |>
  filter(fiscal_year %in% c(1978:2021)) 
inflation_complete
 
# csv for energy consumption
energy_consumption_usa <- read_csv("energy_consumption_usa.csv", show_col_types = "FALSE")
energy_consumption_usa_complete <- energy_consumption_usa |>
  filter(fiscal_year %in% c(1978:2021))
energy_consumption_usa_complete

# csv for divided vs. unified government
divided_vs_unified <- read_csv("code_for_unified_vs_divided_gov.csv", show_col_types = "FALSE")
divided_vs_unified_complete <- divided_vs_unified |>
  filter(fiscal_year %in% c(1978:2021)) 
divided_vs_unified_complete 

## JOINING DATASETS
# 1 additional variable 
president_party_plus_1var <- inner_join(x = no_arpa_complete, y = congressional_spending_complete, by = "fiscal_year")
# president party along with 1) congressional spending outlays and 2) outlays as fraction of GDP
president_party_plus_1var |>
  inner_join(congressional_spending_complete) |>
  select(fiscal_year, total_doe_rnd, president_party, outlays, outlays_frac_of_gdp)

# 2 additional variables
president_party_plus_2var <- inner_join(x = president_party_plus_1var, y = crude_oil_prices_complete, by = "fiscal_year") 
president_party_plus_2var |>
  inner_join(crude_oil_prices_complete) |>
  select(fiscal_year, total_doe_rnd, president_party, outlays, outlays_frac_of_gdp, crude_oil_prices)

# 3 additional variables
president_party_plus_3var <- inner_join(x = president_party_plus_2var, y = inflation_complete, by = "fiscal_year") 
president_party_plus_3var |>
  inner_join(inflation_complete) |>
  select(fiscal_year, total_doe_rnd, president_party, outlays, outlays_frac_of_gdp, crude_oil_prices, inflation)

# 4 additional variables
president_party_plus_4var <- inner_join(x = president_party_plus_3var, y = energy_consumption_usa_complete, by = "fiscal_year") 
multi_var_selected <- president_party_plus_4var |>
  inner_join(energy_consumption_usa) |>
  select(fiscal_year, total_doe_rnd, president_party, outlays, outlays_frac_of_gdp, crude_oil_prices, inflation, energy_consump)

# 5 additional variables
president_party_plus_5var <- inner_join(x = president_party_plus_4var, y = divided_vs_unified_complete, by = "fiscal_year") 
multi_var_selected <- president_party_plus_5var |>
  inner_join(divided_vs_unified_complete) |>
  select(fiscal_year, total_doe_rnd, president_party, outlays, outlays_frac_of_gdp, crude_oil_prices, inflation, energy_consump, divided_vs_unified)
```

## REGRESSION
```{r regression}
library(modelsummary)

multi_var_reg <- lm(total_doe_rnd ~ president_party + outlays + outlays_frac_of_gdp + crude_oil_prices + inflation + energy_consump + divided_vs_unified, data = multi_var_selected)

modelsummary::modelsummary(multi_var_reg,
                           statistic = c("s.e. = {std.error}",
                                         "p = {p.value}"),
                           gof_map = c("nobs", "r.squared", "adj.r.squared"))


## Future variables to consider
# GLOBAL energy consumption/spending; investments in DARPA-E and DARPA-C; GDP yearly growth; DoD spending; DOE spending out of total spending (% of total budget) 

```

The coefficient on `president_party` is approximately 1064, which implies that under Democratic presidents, the total DOE budget was about $1064 larger (in 2020 USD) compared to under Republican presidents. Given that the p-value of this coefficient is 0.010, which is less than an $\alpha = 0.05$, this coefficient is statistically significant. 

The coefficient on `outlays` is 1.21, suggesting that for every `$`1B increase in the outlays (spending side of the budget), the total DOE budget allocated toward energy R&D increases by `$`1.21M. The p-value here is 0.007, which is less than $\alpha = 0.05$, so this coefficient is statistically significant. 

The coefficient on `outlays_frac_of_gdp` is about -137, suggesting that for every 1% increase in outlay as a fraction of U.S. GDP, the total DOE budget for energy R&D decreases by -137 million dollars (2020 USD). However, the corresponding p-value here is 0.404, which is larger than $\alpha = 0.05$, rendering this coefficient not statistically significant. 

Similarly, the coefficient on `crude_oil_prices` is approximately -0.78, indicating that for every $1 increase in the price of crude oil globally, measured per cubic meter (2021 USD), the total DOE budget for energy R&D decreases by 0.78 million dollars (2020 USD). Still, the corresponding p-value of 0.571 is larger than $\alpha = 0.05$, making this coefficient not statistically significant. 

On the other hand, the coefficient on `inflation` is 621.16, showing that for every 1% increase in inflation (measured with regard to consumer prices) in the United States, the DOE budget for energy R&D increases by 621.16 million dollars (2020 USD). The corresponding p-value, <0.001, is very significant, as it is substantially smaller than $\alpha = 0.05$.

Finally, the coefficient on `energy_consump` is -0.399, reflecting that for every one quadrillion BTU increase in energy consumption, the DOE budget for R&D decreases by 399,000 dollars (2020 USD). The p-value of 0.029 is less than an $\alpha = 0.05$, making this coefficient statistically significant. 

--

From Sample Project

I am interested in exploring data related to immigration enforcement and immigration preferences. A working project with Asya Magazinnik (Massachusetts Institute of Technology) explores how county-level compliance of Sheriff's offices with ICE detainer requests relates to ideal point estimates of immigration preferences. Specifically: our project asks whether the public's immigration preferences, restrictive or accommodating, influences how local law enforcement agencies comply with bureaucratic delegation from ICE.

To investigate this relationship, we are relying on data from three different sources:

1. [Transactional Records Access Clearinghouse (TRAC)](https://trac.syr.edu/immigration/) data on detainer requests sent to county Sheriff's offices from the Department of Homeland Security's sub-agency Immigration Customs and Enforcement (ICE);

2. [Coooperative Election Study (CES)](https://cces.gov.harvard.edu/) data on immigration policy preferences; and

3. novel data of county-level Sheriff elections and electoral type--partisan or non-partisan elections, non-electoral appointment.

TRAC data provides us with our outcome variable, the proportion of ICE detainer requests that are complied with; CES data provides us with our explanatory variable, public immigration policy preferences; and the Sheriff electoral data provides us with a grouping variable.

--

Does unified government enhance legislative productivity? In this study, I plan to examine the extent to which periods of unified government produce more landmark laws. I hypothesize that legislative productivity increases during periods of unified government in which one party controls both Houses of Congress and the presidency relative to periods of divided government. During periods of unified government, I expect that it is more likely for major bills to pass both Houses and gain the president’s signature. During periods of divided government, it is more difficult to reach a consensus around legislation that can pass each House and gain the president’s approval. My sample is comprised of each of the 79th (1945-1946) through 103rd (1993-1994) Congresses. My unit of analysis is a Congress (e.g., the 88th Congress). The explanatory variable of interest is whether there is unified government (both Houses and the presidency are controlled by the same party) or divided government. The variable is coded =1 for unified government and =0 for divided government. My outcome variable is the count of landmark pieces of legislation passed in a given Congress. For instance, if the variable were coded =11, it would mean that 11 pieces of landmark legislation were signed into law in that Congress. This variable is measured from David Mayhew’s data set on landmark legislation and relies on Mayhew’s expert knowledge to classify legislation as “landmark.” If I observe greater landmark legislative productivity under unified government relative to divided government, this would provide support for my hypothesis. If, on the other hand, I observe less productivity or the same level of productivity under unified government, this would provide evidence against my hypothesis. When I run my regression of the count of landmark legislation on the unified government indicator variable, a positive, significant coefficient would indicate support for my hypothesis.
